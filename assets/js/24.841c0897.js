(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{467:function(e,t,r){"use strict";var n=r(2),l=r(153),o=r(38),a=r(12),d=r(13),i=r(154),s=r(62),c=r(63)("splice"),m=Math.max,h=Math.min;n({target:"Array",proto:!0,forced:!c},{splice:function(e,t){var r,n,c,u,p,g,f=d(this),C=a(f.length),k=l(e,C),N=arguments.length;if(0===N?r=n=0:1===N?(r=0,n=C-k):(r=N-2,n=h(m(o(t),0),C-k)),C+r-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(c=i(f,n),u=0;u<n;u++)(p=k+u)in f&&s(c,u,f[p]);if(c.length=n,r<n){for(u=k;u<C-n;u++)g=u+r,(p=u+n)in f?f[g]=f[p]:delete f[g];for(u=C;u>C-n+r;u--)delete f[u-1]}else if(r>n)for(u=C-n;u>k;u--)g=u+r-1,(p=u+n-1)in f?f[g]=f[p]:delete f[g];for(u=0;u<r;u++)f[u+k]=arguments[u+2];return f.length=C-n+r,c}})},520:function(e,t,r){},567:function(e,t,r){"use strict";r(520)},582:function(e,t,r){"use strict";r.r(t);r(98),r(96),r(36),r(11),r(467),r(167),r(18),r(253);var n=r(0);function l(e){if(!(this instanceof l))return new l(e,null,null)}l.treeToArray=function(e,t,r,o){var a=[];return Array.from(e).forEach((function(e){void 0===e._expanded&&n.default.set(e,"_expanded",o),t&&n.default.set(e,"_parent",t);var d=0;if(null!=r&&(d=r+1),n.default.set(e,"_level",d),a.push(e),e.children&&e.children.length>0){var i=l.treeToArray(e.children,e,d,o);a=a.concat(i)}})),a};var o={MSDataTransfer:l},a={name:"TTreeTable",props:{treeStructure:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},operator:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]}},requestUrl:{type:String,default:""},showCheckBox:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1}},computed:{data:function(){if(this.treeStructure){var e=o.MSDataTransfer.treeToArray(this.dataSource,null,null,this.defaultExpandAll);return e}return this.dataSource}},methods:{goEdit:function(e){this.$emit("showPopEdit",e)},showTr:function(e){var t=e.row,r=(e.rowIndex,!t._parent||t._parent._expanded&&t._parent._show);return t._show=r,r?"":"hide-row"},toggle:function(e){var t=this.data[e];t._expanded=!t._expanded},spaceIconShow:function(e){return!(!this.treeStructure||0!==e)},toggleIconShow:function(e,t){return!!(this.treeStructure&&0===e&&t.children&&t.children.length>0)},toggleChecked:function(e){e.children.length>0?(this.selectionChildren(e,e.checked),0!==e._level&&this.selectionParent(this.dataSource,e.id,e.checked,e)):this.selectionParent(this.dataSource,e.id,e.checked,e)},selectionParent:function(e,t,r,n){var l=[];!function t(r,n){for(var o="[object Array]"===Object.prototype.toString.call(r)?r:r.children,a=0;a<o.length;a++){if(o[a].id===n){l.push(o[a]),t(e,r.id);break}o[a].children&&t(o[a],n)}}(e,t),l=l.splice(1,l.length),r?l&&l.map((function(e){e.checked=!0})):l&&l.map((function(e){var t=e.children.some((function(e){return!0===e.checked})),r=e.children.some((function(e){return"1"===e.type})),n=e.children.every((function(e){return"2"===e.type}));t||!r||n||(e.checked=!1)}))},selectionChildren:function(e,t){e.checked=t;var r=e.children;if(r&&0===r.length)this.$forceUpdate();else if(r&&r.length>0)for(var n=0;n<r.length;n++)r[n].checked=t,this.selectionChildren(e.children[n],t)},findSonListCheck:function(e,t){var r=this;return t=t||[],e.map((function(e){e.checked&&t.push(e.id);var n=e.children;n.length>0&&r.findSonListCheck(n,t)})),t},findSonListNotCheck:function(e,t){var r=this;return t=t||[],e.map((function(e){e.checked||t.push(e.id);var n=e.children;n.length>0&&r.findSonListNotCheck(n,t)})),t},updateRoleOrRes:function(){return this.findSonListNotCheck(this.dataSource)},updateRoleOrResChecked:function(){return this.findSonListCheck(this.dataSource)}}},d=(r(567),r(35)),i={components:{TTreeTable:Object(d.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tree-table-container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,border:"","row-class-name":e.showTr}},[e.showCheckBox?r("el-table-column",{attrs:{label:"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-checkbox",{attrs:{indeterminate:t.row._indeterminate},on:{change:function(r){return e.toggleChecked(t.row)}},model:{value:t.row.checked,callback:function(r){e.$set(t.row,"checked",r)},expression:"scope.row.checked"}})]}}],null,!1,4160157070)}):e._e(),e._v(" "),e._l(e.columns,(function(t,n){return r("el-table-column",{key:t.dataIndex,attrs:{label:t.text,type:t.type},scopedSlots:e._u([{key:"default",fn:function(l){return[e._l(l.row._level,(function(t,l){return r("span",{directives:[{name:"show",rawName:"v-show",value:e.spaceIconShow(n),expression:"spaceIconShow(index)"}],key:l,staticClass:"ms-tree-space"})})),e._v(" "),e.toggleIconShow(n,l.row)?r("button",{staticClass:"button is-outlined is-primary is-small",staticStyle:{border:"0",background:"transparent",outline:"none"},on:{click:function(t){return e.toggle(l.$index)}}},[l.row._expanded?e._e():r("i",{staticClass:"el-icon el-icon-caret-right",attrs:{"aria-hidden":"true"}}),e._v(" "),l.row._expanded?r("i",{staticClass:"el-icon el-icon-caret-right el-table__expand-icon--expanded",attrs:{"aria-hidden":"true"}}):e._e()]):0===n?r("span",{staticClass:"ms-tree-space"}):e._e(),e._v(" "),!t.filters&&l.row?r("span",[e._v(e._s(l.row[t.dataIndex]))]):e._e(),e._v(" "),t.filters&&t.filters.param?r("span",[e._v(e._s(e._f("constantKey2Value")(l.row[t.dataIndex],t.filters.param)))]):e._e()]}}],null,!0)})})),e._v(" "),e.operator?r("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.operator,(function(n,l){return r("el-button",{directives:[{name:"show",rawName:"v-show",value:!n.show||n.show.val.includes(t.row[n.show.key]),expression:"\n            !item.show || item.show.val.includes(scope.row[item.show.key])\n          "}],key:l,attrs:{type:n.type,size:"small"},on:{click:function(e){return n.fun(t.row)}}},[e._v(e._s(n.text))])}))}}],null,!1,1460937017)}):e._e(),e._v(" "),e._t("default")],2)],1)}),[],!1,null,null,null).exports},data:function(){return{columns:[{text:"资源名称",dataIndex:"resName"},{text:"资源代码",dataIndex:"resCode"},{text:"资源类型",dataIndex:"type",filters:{param:"MENU_TYPE"}},{text:"所属角色",dataIndex:"roleNames"}],operator:[{text:"编辑",resCode:"resource-edit",fun:this.goEdit}],roleResList:[]}},mounted:function(){this.roleResList=this.formatTreeData([{id:378,resName:"系统管理",resCode:"system-manage",parentId:0,children:[{id:379,resName:"企业角色管理",resCode:"ent-role-manage",parentId:378,children:[{id:464,resName:"企业角色导出操作",resCode:"ent-role-export",parentId:379,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:465,resName:"企业角色新增操作",resCode:"ent-role-add",parentId:379,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:466,resName:"企业角色编辑操作",resCode:"ent-role-edit",parentId:379,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:467,resName:"企业角色禁用操作",resCode:"ent-role-disabled",parentId:379,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:468,resName:"企业角色启用操作",resCode:"ent-role-ensble",parentId:379,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:469,resName:"企业角色授权操作",resCode:"ent-role-authorize",parentId:379,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null}],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"1",belong:null},{id:380,resName:"运营角色管理",resCode:"mgt-role-mange",parentId:378,children:[{id:470,resName:"运营角色导出操作",resCode:"mgt-role-export",parentId:380,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:471,resName:"运营角色新增操作",resCode:"mgt-role-add",parentId:380,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:472,resName:"运营角色编辑操作",resCode:"mgt-role-edit",parentId:380,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:473,resName:"运营角色禁用操作",resCode:"mgt-role-disabled",parentId:380,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:474,resName:"运营角色启用操作",resCode:"mgt-role-ensble",parentId:380,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:475,resName:"运营角色授权操作",resCode:"mgt-role-authorize",parentId:380,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null}],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"1",belong:null},{id:381,resName:"运营用户管理",resCode:"mgt-user-mange",parentId:378,children:[{id:476,resName:"运营用户导出操作",resCode:"mgt-user-export",parentId:381,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:477,resName:"运营用户冻结操作",resCode:"mgt-user-freeze",parentId:381,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:478,resName:"运营用户解冻操作",resCode:"mgt-user-unfreeze",parentId:381,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:479,resName:"运营用户重置密码操作",resCode:"mgt-user-reset",parentId:381,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null},{id:480,resName:"运营用户删除操作",resCode:"mgt-user-del",parentId:381,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null}],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"1",belong:null},{id:382,resName:"资源菜单管理",resCode:"resource-manage",parentId:378,children:[{id:481,resName:"资源菜单编辑操作",resCode:"resource-edit",parentId:382,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:null}],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"1",belong:null},{id:412,resName:"运营用户详情",resCode:"mgt-user-mange-det",parentId:378,children:[],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"2",belong:"mgt-user-mange"},{id:413,resName:"运营用户新增",resCode:"mgt-user-mange-add",parentId:378,children:[],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"2",belong:"mgt-user-mange"},{id:414,resName:"运营用户授权",resCode:"mgt-user-mange-authorize",parentId:378,children:[],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"2",belong:"mgt-user-mange"},{id:435,resName:"节假日设置",resCode:"holiday-setting",parentId:378,children:[],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"1",belong:null}],roleNames:"运营端管理员,运营端产品经理",check:!0,terminalCode:"mgt",type:"1",belong:null},{id:393,resName:"工作台",resCode:"workspaces",parentId:0,children:[{id:394,resName:"待办任务",resCode:"todo-tasks",parentId:393,children:[{id:482,resName:"待办导出操作",resCode:"todo-tasks-export",parentId:394,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:null}],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null},{id:395,resName:"待办任务/详情",resCode:"todo-tasks-detail",parentId:393,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:"todo-tasks"},{id:396,resName:"任务查询",resCode:"handled-tasks",parentId:393,children:[{id:483,resName:"任务导出操作",resCode:"handled-tasks-export",parentId:396,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:null}],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null},{id:397,resName:"任务查询/详情",resCode:"handled-tasks-detail",parentId:393,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:"handled-tasks-process"},{id:448,resName:"流程查看",resCode:"handled-tasks-process",parentId:393,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:"handled-tasks"}],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null},{id:436,resName:"风险管理",resCode:"risk-manage",parentId:0,children:[{id:437,resName:"风控管理",resCode:"risk-control-manage",parentId:436,children:[{id:438,resName:"风控报告/详情",resCode:"risk-report-detail",parentId:437,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:"risk-report-list"},{id:439,resName:"风控报告",resCode:"risk-report-list",parentId:437,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null},{id:440,resName:"风控报告/规则结果",resCode:"risk-report-rule",parentId:437,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:"risk-report-list"},{id:444,resName:"风控规则查询",resCode:"risk-rule-list",parentId:437,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"1",belong:null},{id:445,resName:"风控规则查询/详情",resCode:"risk-rule-detail",parentId:437,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"2",belong:"risk-rule-list"}],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null},{id:441,resName:"贷后预警",resCode:"loan-warning",parentId:436,children:[{id:442,resName:"贷后监测",resCode:"loan-monitoring",parentId:441,children:[{id:453,resName:"人工执行操作",resCode:"loan-monitoring-manually",parentId:442,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:null}],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null},{id:443,resName:"贷后监测/详情",resCode:"loan-monitoring-detail",parentId:441,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"2",belong:"loan-monitoring"}],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null},{id:447,resName:"额度查询",resCode:"quota-query",parentId:436,children:[],roleNames:"运营端管理员",check:!0,terminalCode:"mgt",type:"1",belong:null}],roleNames:"运营端管理员",check:!0,terminalCode:"ent,mgt",type:"1",belong:null}])},methods:{formatTreeData:function(e){var t=this;return e.forEach((function(e){e.children&&e.children.length>0&&(t.formatTreeData(e.children),e.children.forEach((function(t){t.belong&&e.children.map((function(e){e.resCode===t.belong&&e.children.push(t)}))})),e.children=e.children.filter((function(e){return!e.belong})))})),e},goEdit:function(e){console.log("点击了按钮",e)}}},s=Object(d.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tree-table",staticStyle:{width:"100%"}},[t("t-tree-table",{ref:"tree",attrs:{columns:this.columns,"data-source":this.roleResList,operator:this.operator,treeStructure:""}})],1)}),[],!1,null,null,null);t.default=s.exports}}]);